{% extends 'contacts_page.html' %}

{% block content %}
  <div class="card">
    <h2>Импорт контактов</h2>
    <p class="subtitle">Поддерживаются форматы .csv и .xlsx</p>

    <!-- Блок для отображения сообщений -->
    {% if messages %}
    <div class="messages">
        {% for message in messages %}
        <div class="alert alert-{{ message.tags }}">
            {{ message }}
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <form method="post" enctype="multipart/form-data">
      {% csrf_token %}

      <input type="file" id="fileUpload" class="file-upload" name="fileUpload" accept=".csv,.xlsx">

      <div class="form-group">
        <label for="fileUpload" class="btn btn-primary">
          Выбрать файл
        </label>

        <button type="submit" class="btn btn-success">Загрузить</button>
      </div>

      <p id="fileName" class="file-name">Файл не выбран</p>
    </form>
  </div>

  <script>
    const fileInput = document.getElementById('fileUpload');
    const fileNameDisplay = document.getElementById('fileName');

    fileInput.addEventListener('change', function () {
      if (this.files.length > 0) {
        fileNameDisplay.textContent = 'Выбран файл: ' + this.files[0].name;
        fileNameDisplay.classList.add('has-file');
      } else {
        fileNameDisplay.textContent = 'Файл не выбран';
        fileNameDisplay.classList.remove('has-file');
      }
    });
  </script>

  <style>
    .file-upload {
      display: none;
    }

    .file-name {
      margin-top: 1rem;
      padding: 0.75rem;
      background-color: #f8f9fa;
      border-radius: 4px;
      border: 1px dashed var(--border);
    }

    .file-name.has-file {
      background-color: #e9f5ff;
      border-color: var(--primary);
      color: var(--primary);
    }

    .form-group {
      display: flex;
      gap: 1rem;
      align-items: center;
      margin-bottom: 1rem;
    }

    /* Стили для сообщений */
    .messages {
      margin-bottom: 1.5rem;
    }

    .alert {
      padding: 0.75rem 1rem;
      margin-bottom: 0.5rem;
      border: 1px solid transparent;
      border-radius: 4px;
      font-size: 0.9rem;
    }

    .alert-success {
      color: #0f5132;
      background-color: #d1e7dd;
      border-color: #badbcc;
    }

    .alert-error {
      color: #721c24;
      background-color: #f8d7da;
      border-color: #f5c6cb;
    }

    .alert-warning {
      color: #856404;
      background-color: #fff3cd;
      border-color: #ffeaa7;
    }

    .alert-info {
      color: #055160;
      background-color: #cff4fc;
      border-color: #b6effb;
    }
  </style>
{% endblock %}